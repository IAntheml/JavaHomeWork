    public ApiResult bindFreeStrategyWithDeviceV2(AuthUserBindDeviceVO vo, Context context){
        //更新绑定关系表
        List<Long> bindDeviceIndexes = vo.getBindDeviceIndexes();
        List<Long> unBindDeviceIndexes = vo.getUnBindDeviceIndexes();
        List<Long> authUserList = vo.getAuthUserList();
        Long projectId = vo.getProjectId();
        if (authUserList.size() == 1){
            Long authUserId = authUserList.get(0);
            List<Long> deviceIndexes = nmsDeviceConfigBindRelationDao.findDeviceIndexesByProjectIdAndConfigModuleAndModuleEntryId(projectId, ConfigModule.authUser.toString(), authUserId);
            List<NmsDeviceConfigBindRelation> bindRelationList = new ArrayList<>();
            for (Long bindDeviceIndex : bindDeviceIndexes){
                if (CollectionUtils.isEmpty(deviceIndexes) || !deviceIndexes.contains(bindDeviceIndex)){
                    bindRelationList.add(new NmsDeviceConfigBindRelation(SnowflakeHolder.nextId(),projectId,ConfigModule.authUser.toString(),null,authUserId,bindDeviceIndex));
                }else {
                    bindDeviceIndexes.remove(bindDeviceIndex);
                }
            }
            nmsDeviceConfigBindRelationDao.saveAll(bindRelationList);
            //下发绑定bindDeviceIndexes、freeStrategyId
            sendFreeStrategyToDeviceMqMsg(projectId,context,ConfigType.bind,Collections.singletonList(authUserId),bindDeviceIndexes);
            if (!CollectionUtils.isEmpty(deviceIndexes)){
                unBindDeviceIndexes.removeIf(unBindDeviceIndex -> !deviceIndexes.contains(unBindDeviceIndex));
                nmsDeviceConfigBindRelationDao.deleteByProjectIdAndConfigModuleAndModuleEntryIdAndDeviceIndexIn(projectId,ConfigModule.authUser.toString(),authUserId,unBindDeviceIndexes);
                //下发解绑bindDeviceIndexes
                sendFreeStrategyToDeviceMqMsg(projectId,context,ConfigType.unbind,Collections.singletonList(authUserId),unBindDeviceIndexes);
            }
        }else {
            if (unBindDeviceIndexes != null){
                return new ApiResult(Errors.INVALID_PARAMS);
            }
            for (Long authUserId : authUserList){
                List<Long> deviceIndexes = nmsDeviceConfigBindRelationDao.findDeviceIndexesByProjectIdAndConfigModuleAndModuleEntryId(projectId,
                        ConfigModule.authUser.toString(), authUserId);
                List<NmsDeviceConfigBindRelation> bindRelationList = new ArrayList<>();
                for (Long deviceIndex : bindDeviceIndexes){
                    if (deviceIndexes.contains(deviceIndex)){
                        bindDeviceIndexes.remove(deviceIndex);
                    }else {
                        bindRelationList.add(new NmsDeviceConfigBindRelation(SnowflakeHolder.nextId(),projectId,ConfigModule.authUser.toString(),null,authUserId,deviceIndex));
                    }
                }
                nmsDeviceConfigBindRelationDao.saveAll(bindRelationList);
                sendFreeStrategyToDeviceMqMsg(projectId,context,ConfigType.bind,Collections.singletonList(freeStrategyId),bindDeviceIndexes);
            }
        }
        return ApiResult.SUCCESS;
    }
