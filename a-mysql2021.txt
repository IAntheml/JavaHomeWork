SELECT temp.`radioUnit`,temp.`radioChannel`,COUNT(*) FROM(
SELECT `radioUnit`,`radioChannel`,`deviceIndex` FROM `cwm_config_radio`
WHERE `deviceIndex` IN (11,12,13,14,15,16,17)) AS temp
GROUP BY `radioUnit`,`radioChannel`;


 //将RadioOptimizeParams转为下发到设备的ApmngRrm
        Map<String, Object> protocolMap = JsonUtils.json2Map(
                JsonUtils.bean2Json(RadioOptimizeParamsAdaptor.toApmngRrm(radioOptimizeInfo)));




https://blog.csdn.net/weixin_44248490/article/details/106900976

public class RadioOptimizeParamsAdaptor {


    public static RadioOptimizeParamsVO toRadioOptimizeParamsVO(RadioOptimizeInfo source) {
        if (source == null){
            return null;
        }
        return JsonUtils.json2bean(source.getRadioOptimizeInfo(),RadioOptimizeParamsVO.class);
    }


    public static ApmngRrm toApmngRrm(RadioOptimizeInfo source){
        ApmngRrm apmngRrm = new ApmngRrm();
        if (source != null && source.getRadioOptimizeInfo() != null){
            apmngRrm = JsonUtils.json2bean(source.getRadioOptimizeInfo(),ApmngRrm.class);
        }
        return apmngRrm;
    }

    public static RadioOptimizeInfo toRadioOptimizeParams(RadioOptimizeParamsVO vo) {
        RadioOptimizeInfo radioOptimizeInfo = new RadioOptimizeInfo();
        radioOptimizeInfo.setProjectId(vo.getProjectId());
        radioOptimizeInfo.setTimingOptimizeEnable(vo.getTimingParams().getTimingOptimizeEnable());
        radioOptimizeInfo.setRepeatDate(vo.getTimingParams().getRepeatDate().toString());
        radioOptimizeInfo.setStartTime(vo.getTimingParams().getStartTime());
        radioOptimizeInfo.setRadioOptimizeInfo(JsonUtils.bean2Json(vo.getRrmOptimizeParams()));
        return radioOptimizeInfo;
    }
}


@Entity
@Table(name = "radio_optimize_params")
public class RadioOptimizeInfo {

    @Id
    @Column(name = "project_id")
    private Long projectId;

    @Column(name = "time_optimize_enable")
    private String timingOptimizeEnable;

    @Column(name = "repeat_date")
    private String repeatDate;

    @Column(name = "start_time")
    private String startTime;

    @Column(name = "radio_optimize_info")
    private String radioOptimizeInfo;

    public Long getProjectId() {
        return projectId;
    }

    public void setProjectId(Long projectId) {
        this.projectId = projectId;
    }

    public String getRadioOptimizeInfo() {
        return radioOptimizeInfo;
    }

    public void setRadioOptimizeInfo(String radioOptimizeInfo) {
        this.radioOptimizeInfo = radioOptimizeInfo;
    }

    public String getTimingOptimizeEnable() {
        return timingOptimizeEnable;
    }

    public void setTimingOptimizeEnable(String timingOptimizeEnable) {
        this.timingOptimizeEnable = timingOptimizeEnable;
    }

    public String getRepeatDate() {
        return repeatDate;
    }

    public void setRepeatDate(String repeatDate) {
        this.repeatDate = repeatDate;
    }

    public String getStartTime() {
        return startTime;
    }

    public void setStartTime(String startTime) {
        this.startTime = startTime;
    }
}

public class RadioOptimizeParamsVO {
    @NotNull(message = "INVALID_PARAMS")
    private Long projectId;

    @Valid
    private RrmOptimizeParams rrmOptimizeParams;

    @Valid
    private TimingParams timingParams;

    public Long getProjectId() {
        return projectId;
    }

    public void setProjectId(Long projectId) {
        this.projectId = projectId;
    }

    public RrmOptimizeParams getRrmOptimizeParams() {
        return rrmOptimizeParams;
    }

    public void setRrmOptimizeParams(RrmOptimizeParams rrmOptimizeParams) {
        this.rrmOptimizeParams = rrmOptimizeParams;
    }

    public TimingParams getTimingParams() {
        return timingParams;
    }

    public void setTimingParams(TimingParams timingParams) {
        this.timingParams = timingParams;
    }

    @Override
    public String toString() {
        return ToStringBuilder.reflectionToString(this);
    }

}

public class RrmOptimizeParams {

    @JsonProperty("bw2g")
    @NotNull(message = "INVALID_PARAMS")
    @Pattern(regexp = "^(auto)|(20M)$", message = "INVALID_PARAMS")
    private String radioChannel2g;

    @JsonProperty("chnl2gSet")
    @NotNull(message = "INVALID_PARAMS")
    private List<String> channel2gSet;

    @JsonProperty("bw5g")
    @NotNull(message = "INVALID_PARAMS")
    @Pattern(regexp = "^(auto)|(20M)|(40M)$", message = "INVALID_PARAMS")
    private String radioChannel5g;

    @JsonProperty("chnl5gSet")
    @NotNull(message = "INVALID_PARAMS")
    private List<String> channel5gSet;

    @JsonProperty("pwrEnable")
    @NotNull(message = "INVALID_PARAMS")
    @Pattern(regexp = "^(on)|(off)$", message = "INVALID_PARAMS")
    private String powerEnable;

    @JsonProperty("pwrThreshold")
    @Range(min = -80, max = -50, message = "INVALID_PARAMS")
    private int powerThreshold;

    @JsonProperty("pwrMaxPwr")
    @Range(min = 10, max = 50, message = "INVALID_PARAMS")
    private int maxPower;

    @JsonProperty("pwrMinPwr")
    @Range(min = 3, max = 30, message = "INVALID_PARAMS")
    private int minPower;

    public String getRadioChannel2g() {
        return radioChannel2g;
    }

    public void setRadioChannel2g(String radioChannel2g) {
        this.radioChannel2g = radioChannel2g;
    }

    public List<String> getChannel2gSet() {
        return channel2gSet;
    }

    public void setChannel2gSet(List<String> channel2gSet) {
        this.channel2gSet = channel2gSet;
    }

    public String getRadioChannel5g() {
        return radioChannel5g;
    }

    public void setRadioChannel5g(String radioChannel5g) {
        this.radioChannel5g = radioChannel5g;
    }

    public List<String> getChannel5gSet() {
        return channel5gSet;
    }

    public void setChannel5gSet(List<String> channel5gSet) {
        this.channel5gSet = channel5gSet;
    }

    public String getPowerEnable() {
        return powerEnable;
    }

    public void setPowerEnable(String powerEnable) {
        this.powerEnable = powerEnable;
    }

    public int getPowerThreshold() {
        return powerThreshold;
    }

    public void setPowerThreshold(int powerThreshold) {
        this.powerThreshold = powerThreshold;
    }

    public int getMaxPower() {
        return maxPower;
    }

    public void setMaxPower(int maxPower) {
        this.maxPower = maxPower;
    }

    public int getMinPower() {
        return minPower;
    }

    public void setMinPower(int minPower) {
        this.minPower = minPower;
    }
}

public class TimingParams {

    @JsonProperty("enable")
    @NotNull(message = "INVALID_PARAMS")
    @Pattern(regexp = "^(on)|(off)$", message = "INVALID_PARAMS")
    private String timingOptimizeEnable;

    @JsonProperty("repeatDate")
    private List<Integer> repeatDate;

    @JsonProperty("startTime")
    @Pattern(regexp = "^([0-1]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$",message = "INVALID_PARAMS")
    private String startTime;

    public String getTimingOptimizeEnable() {
        return timingOptimizeEnable;
    }

    public void setTimingOptimizeEnable(String timingOptimizeEnable) {
        this.timingOptimizeEnable = timingOptimizeEnable;
    }

    public List<Integer> getRepeatDate() {
        return repeatDate;
    }

    public void setRepeatDate(List<Integer> repeatDate) {
        this.repeatDate = repeatDate;
    }

    public String getStartTime() {
        return startTime;
    }

    public void setStartTime(String startTime) {
        this.startTime = startTime;
    }
}

public class ApmngRrm {

    @Valid
    @JsonProperty("settings")
    private RrmSettings rrmSettings;

    public RrmSettings getRrmSettings() {
        return rrmSettings;
    }

    public void setRrmSettings(RrmSettings rrmSettings) {
        this.rrmSettings = rrmSettings;
    }

    @Override
    public String toString() {
        return ToStringBuilder.reflectionToString(this);
    }


}



